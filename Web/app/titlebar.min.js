app.directive("pmTitleBar",function(){return{restrict:"E",templateUrl:"app/titlebar.html",controller:["$scope","$http","$location","hubManager",function(n,t,i,r){function e(){t.get("api/portfolios").success(function(t){n.state.portfolios=t;sessionStorage.setItem("portfolios",JSON.stringify(t));u&&u()})}var u,f=sessionStorage.getItem("portfolios");(n.state={isFirmSummary:i.path()==="/",portfolioId:function(){var n=i.path().toString();return n.length>11&&n.substring(0,11)=="/portfolio/"?n.substring(11):null}(),portfolios:f?JSON.parse(f):[]},n.navigateToPortfolio=function(t){n.state.portfolioId!==t&&(n.state.isFirmSummary=!1,n.state.portfolioId=t,i.path("/portfolio/"+t))},n.navigateToFirmSummary=function(){n.state.isFirmSummary||(n.state.isFirmSummary=!0,n.state.portfolioId=null,i.path("/"))},f)||(r.state==$.signalR.connectionState.connected?e():u=n.$on("stateChanged",function(n,t){t===$.signalR.connectionState.connected&&e()}))}]}});